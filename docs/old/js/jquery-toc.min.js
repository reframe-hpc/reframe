!function(a){a.TOC=function(b,c,d){var e=this;return e.$el=a(b),e.html="",e.init=function(){a.extend(d,e.$el.data());for(var b in d)d.hasOwnProperty(b)&&""==d[b]&&delete d[b];e.options=a.extend({},a.TOC.defaultOptions,d),"undefined"!=typeof e.options.scope&&null!=e.options.scope||(e.options.scope=document.body),"undefined"!=typeof d&&null!=d||(d=""),e.options.nested=!0,e.options.startLevel=e.options.startLevel<1||e.options.startLevel>6?1:e.options.startLevel,e.options.depth=e.options.depth<1||e.options.depth>6?1:e.options.depth;var f=e.options.nested?e.options.headings.splice(e.options.startLevel-1,e.options.depth):e.options.headings;if(c=e.options.scope,e.$headings=a(c).children(f.join(", ")).filter(function(){return 0===a(this).closest(e.options.ignoreContainers).length}),0!=e.$headings.length){if(e.options.topLinks!==!1){var g=a(document.body).attr("id");""==g&&(g=e.options.topBodyId,document.body.id=g),e.topLinkId=g}return e.$el.append("<"+e.options.containerType+" class='nav'>"+e.buildTOC()+"</"+e.options.containerType+">"),e}},e.buildTOC=function(){return e.current_depth=e.options.startLevel,e.$headings.each(function(a){var b=this.nodeName.toLowerCase();if(e.options.nested){var c=b.substr(1,1);(a>0||0==a&&c!=e.current_depth)&&e.addItem(c,a),e.html+=e.formatLink(this,c,a)+"\n"}else e.html+="<"+e.options.itemType+">\n"+e.formatLink(this,b,a)+"\n</"+e.options.itemType+">\n";e.options.topLinks!==!1&&e.addTopLink(this)}),e.addItem(e.options.startLevel,e.$headings.length),e.options.nested&&(e.html="<"+e.options.itemType+"  class=''>\n"+e.html+"</"+e.options.itemType+">\n"),e.html},e.addTopLink=function(b){var c=e.options.topLinks===!0?"Top":e.options.topLinks,d=a("<a href='#"+e.topLinkId+"' class='"+e.options.topLinkClass+"'></a>").html(c);a(b).append(d)},e.formatLink=function(b,c,d){var f=b.id;return""==f&&(f="toc-id-"+d,b.id=f),'<a href="#'+f+'" class="'+e.formatDepthClass(c)+'" >'+e.options.linkText.replace("%",a(b).text())+"</a>"},e.addItem=function(a,b){var c;if(a>e.current_depth)for(c=e.current_depth;c<a;c++)e.html+="<"+e.options.containerType+' class="nav">\n <'+e.options.itemType+">\n";else if(a<e.current_depth){for(c=e.current_depth;c>a;c--)e.html+="</"+e.options.itemType+">\n </"+e.options.containerType+">\n";e.$headings.length!=b&&(e.html+="</"+e.options.itemType+">\n<"+e.options.itemType+">\n")}else e.$headings.length!=b&&(e.html+="</"+e.options.itemType+">\n<"+e.options.itemType+">\n");e.current_depth=a},e.formatDepthClass=function(a){return e.options.nested?e.options.depthClass.replace("%",a-(e.options.startLevel-1)):e.options.depthClass.replace("%",a)},e.init(c,d)},a.TOC.defaultOptions={scope:"#cscs-markdown-content",headings:["h1","h2"],startLevel:1,depth:2,depthClass:"toc-depth-%",linkText:"%",topLinks:!1,topLinkClass:"toc-link",topBodyId:"top",containerType:"ul",itemType:"li",nested:!0,ignoreContainers:""},a.fn.TOC=function(b,c){return this.each(function(){var d=new a.TOC(this,b,c);delete d})}}(jQuery);